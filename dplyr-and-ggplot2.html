<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>4 "dplyr" and "ggplot2" | Tidy Hurricanes</title>
  <meta name="description" content="<p>This manuscript describes various examples for how to use Tidyverse tools to
perform an exploratory analysis of storms and hurricanes in the North Atlantic.</p>" />
  <meta name="generator" content="bookdown 0.29 and GitBook 2.6.7" />

  <meta property="og:title" content="4 "dplyr" and "ggplot2" | Tidy Hurricanes" />
  <meta property="og:type" content="book" />
  <meta property="og:image" content="https://www.gastonsanchez.com/R-tidy-hurricanes/images/R-tidy-hurricanes-cover.png" />
  <meta property="og:description" content="<p>This manuscript describes various examples for how to use Tidyverse tools to
perform an exploratory analysis of storms and hurricanes in the North Atlantic.</p>" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="4 "dplyr" and "ggplot2" | Tidy Hurricanes" />
  
  <meta name="twitter:description" content="<p>This manuscript describes various examples for how to use Tidyverse tools to
perform an exploratory analysis of storms and hurricanes in the North Atlantic.</p>" />
  <meta name="twitter:image" content="https://www.gastonsanchez.com/R-tidy-hurricanes/images/R-tidy-hurricanes-cover.png" />

<meta name="author" content="Gaston Sanchez" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  <link rel="shortcut icon" href="images/favicon.ico" type="image/x-icon" />
<link rel="prev" href="storms.html"/>
<link rel="next" href="single-columns.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./"><b>Tidy Hurricanes</b><br><small>Gaston Sanchez</small></a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>About</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#my-series-of-r-tutorials"><i class="fa fa-check"></i>My Series of R Tutorials</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#donation"><i class="fa fa-check"></i>Donation</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#license"><i class="fa fa-check"></i>License</a></li>
</ul></li>
<li class="part"><span><b>I Introduction</b></span></li>
<li class="chapter" data-level="1" data-path="tables-and-tidyverse.html"><a href="tables-and-tidyverse.html"><i class="fa fa-check"></i><b>1</b> Tables and Tidyverse</a>
<ul>
<li class="chapter" data-level="" data-path="tables-and-tidyverse.html"><a href="tables-and-tidyverse.html#installing-tidyverse"><i class="fa fa-check"></i>Installing Tidyverse</a></li>
<li class="chapter" data-level="" data-path="tables-and-tidyverse.html"><a href="tables-and-tidyverse.html#a-bit-about-tidyverse"><i class="fa fa-check"></i>A bit about Tidyverse</a></li>
<li class="chapter" data-level="" data-path="tables-and-tidyverse.html"><a href="tables-and-tidyverse.html#note"><i class="fa fa-check"></i>Note</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="tropical-storms.html"><a href="tropical-storms.html"><i class="fa fa-check"></i><b>2</b> Tropical Storms and Hurricanes</a>
<ul>
<li class="chapter" data-level="2.1" data-path="tropical-storms.html"><a href="tropical-storms.html#a-little-bit-about-hurricanes"><i class="fa fa-check"></i><b>2.1</b> A little bit about Hurricanes</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="tropical-storms.html"><a href="tropical-storms.html#tropical-cyclones"><i class="fa fa-check"></i><b>2.1.1</b> Tropical Cyclones</a></li>
<li class="chapter" data-level="2.1.2" data-path="tropical-storms.html"><a href="tropical-storms.html#storm-classification"><i class="fa fa-check"></i><b>2.1.2</b> Storm Classification</a></li>
<li class="chapter" data-level="2.1.3" data-path="tropical-storms.html"><a href="tropical-storms.html#naming-storms"><i class="fa fa-check"></i><b>2.1.3</b> Naming Storms</a></li>
<li class="chapter" data-level="2.1.4" data-path="tropical-storms.html"><a href="tropical-storms.html#atlantic-hurricane-season"><i class="fa fa-check"></i><b>2.1.4</b> Atlantic Hurricane Season</a></li>
<li class="chapter" data-level="2.1.5" data-path="tropical-storms.html"><a href="tropical-storms.html#storm-formation"><i class="fa fa-check"></i><b>2.1.5</b> Storm Formation</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="storms.html"><a href="storms.html"><i class="fa fa-check"></i><b>3</b> Data Set <code>storms</code></a>
<ul>
<li class="chapter" data-level="3.1" data-path="storms.html"><a href="storms.html#atlantic-hurricane-data"><i class="fa fa-check"></i><b>3.1</b> Atlantic Hurricane Data</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="storms.html"><a href="storms.html#data-storms"><i class="fa fa-check"></i><b>3.1.1</b> Data <code>storms</code></a></li>
<li class="chapter" data-level="3.1.2" data-path="storms.html"><a href="storms.html#storms-documentation"><i class="fa fa-check"></i><b>3.1.2</b> <code>storms</code> Documentation</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="storms.html"><a href="storms.html#general-inspection"><i class="fa fa-check"></i><b>3.2</b> General Inspection</a></li>
</ul></li>
<li class="part"><span><b>II Getting Started with Tidy Tools</b></span></li>
<li class="chapter" data-level="4" data-path="dplyr-and-ggplot2.html"><a href="dplyr-and-ggplot2.html"><i class="fa fa-check"></i><b>4</b> <code>"dplyr"</code> and <code>"ggplot2"</code></a>
<ul>
<li class="chapter" data-level="4.1" data-path="dplyr-and-ggplot2.html"><a href="dplyr-and-ggplot2.html#sample-data"><i class="fa fa-check"></i><b>4.1</b> Sample Data</a></li>
<li class="chapter" data-level="4.2" data-path="dplyr-and-ggplot2.html"><a href="dplyr-and-ggplot2.html#basics-of-ggplot2"><i class="fa fa-check"></i><b>4.2</b> Basics of <code>"ggplot2"</code></a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="dplyr-and-ggplot2.html"><a href="dplyr-and-ggplot2.html#some-terminology"><i class="fa fa-check"></i><b>4.2.1</b> Some Terminology</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="dplyr-and-ggplot2.html"><a href="dplyr-and-ggplot2.html#basic-scatterplot"><i class="fa fa-check"></i><b>4.3</b> Basic Scatterplot</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="dplyr-and-ggplot2.html"><a href="dplyr-and-ggplot2.html#storing-a-ggplot-object"><i class="fa fa-check"></i><b>4.3.1</b> Storing a <code>ggplot</code> object</a></li>
<li class="chapter" data-level="4.3.2" data-path="dplyr-and-ggplot2.html"><a href="dplyr-and-ggplot2.html#more-mappings"><i class="fa fa-check"></i><b>4.3.2</b> More Mappings</a></li>
<li class="chapter" data-level="4.3.3" data-path="dplyr-and-ggplot2.html"><a href="dplyr-and-ggplot2.html#setting-values"><i class="fa fa-check"></i><b>4.3.3</b> Setting Values</a></li>
<li class="chapter" data-level="4.3.4" data-path="dplyr-and-ggplot2.html"><a href="dplyr-and-ggplot2.html#customizing-scales"><i class="fa fa-check"></i><b>4.3.4</b> Customizing Scales</a></li>
<li class="chapter" data-level="4.3.5" data-path="dplyr-and-ggplot2.html"><a href="dplyr-and-ggplot2.html#themes-annotations-etc"><i class="fa fa-check"></i><b>4.3.5</b> Themes, Annotations, etc</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="dplyr-and-ggplot2.html"><a href="dplyr-and-ggplot2.html#basic-dplyr-verbs"><i class="fa fa-check"></i><b>4.4</b> Basic <code>"dplyr"</code> verbs</a>
<ul>
<li class="chapter" data-level="4.4.1" data-path="dplyr-and-ggplot2.html"><a href="dplyr-and-ggplot2.html#filter"><i class="fa fa-check"></i><b>4.4.1</b> Filter</a></li>
<li class="chapter" data-level="4.4.2" data-path="dplyr-and-ggplot2.html"><a href="dplyr-and-ggplot2.html#slice"><i class="fa fa-check"></i><b>4.4.2</b> Slice</a></li>
<li class="chapter" data-level="4.4.3" data-path="dplyr-and-ggplot2.html"><a href="dplyr-and-ggplot2.html#select"><i class="fa fa-check"></i><b>4.4.3</b> Select</a></li>
<li class="chapter" data-level="4.4.4" data-path="dplyr-and-ggplot2.html"><a href="dplyr-and-ggplot2.html#mutate"><i class="fa fa-check"></i><b>4.4.4</b> Mutate</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="dplyr-and-ggplot2.html"><a href="dplyr-and-ggplot2.html#exercises"><i class="fa fa-check"></i><b>4.5</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="single-columns.html"><a href="single-columns.html"><i class="fa fa-check"></i><b>5</b> Inspecting Single Columns</a>
<ul>
<li class="chapter" data-level="5.1" data-path="single-columns.html"><a href="single-columns.html#basic-inspection-of-year"><i class="fa fa-check"></i><b>5.1</b> Basic Inspection of Year</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="single-columns.html"><a href="single-columns.html#barplot-of-year-values"><i class="fa fa-check"></i><b>5.1.1</b> Barplot of <code>year</code> values</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="single-columns.html"><a href="single-columns.html#basic-inspection-of-month"><i class="fa fa-check"></i><b>5.2</b> Basic inspection of <code>month</code></a></li>
<li class="chapter" data-level="5.3" data-path="single-columns.html"><a href="single-columns.html#exercises-1"><i class="fa fa-check"></i><b>5.3</b> Exercises</a></li>
</ul></li>
<li class="part"><span><b>III Analyzing Storms in 1975</b></span></li>
<li class="chapter" data-level="6" data-path="storms-in-1975.html"><a href="storms-in-1975.html"><i class="fa fa-check"></i><b>6</b> Storms in 1975</a>
<ul>
<li class="chapter" data-level="6.1" data-path="storms-in-1975.html"><a href="storms-in-1975.html#visualizing-1975-data"><i class="fa fa-check"></i><b>6.1</b> Visualizing 1975 data</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="storms-in-1975.html"><a href="storms-in-1975.html#histograms"><i class="fa fa-check"></i><b>6.1.1</b> Histograms</a></li>
<li class="chapter" data-level="6.1.2" data-path="storms-in-1975.html"><a href="storms-in-1975.html#boxplots"><i class="fa fa-check"></i><b>6.1.2</b> Boxplots</a></li>
<li class="chapter" data-level="6.1.3" data-path="storms-in-1975.html"><a href="storms-in-1975.html#density-curves"><i class="fa fa-check"></i><b>6.1.3</b> Density Curves</a></li>
<li class="chapter" data-level="6.1.4" data-path="storms-in-1975.html"><a href="storms-in-1975.html#facets"><i class="fa fa-check"></i><b>6.1.4</b> Facets</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="storm-amy-1975.html"><a href="storm-amy-1975.html"><i class="fa fa-check"></i><b>7</b> Storm Amy (1975)</a>
<ul>
<li class="chapter" data-level="7.1" data-path="storm-amy-1975.html"><a href="storm-amy-1975.html#exploring-wind"><i class="fa fa-check"></i><b>7.1</b> Exploring <code>wind</code></a></li>
<li class="chapter" data-level="7.2" data-path="storm-amy-1975.html"><a href="storm-amy-1975.html#exploring-pressure"><i class="fa fa-check"></i><b>7.2</b> Exploring <code>pressure</code></a></li>
<li class="chapter" data-level="7.3" data-path="storm-amy-1975.html"><a href="storm-amy-1975.html#exercises-2"><i class="fa fa-check"></i><b>7.3</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="summarizing-1975-data.html"><a href="summarizing-1975-data.html"><i class="fa fa-check"></i><b>8</b> Summarizing 1975 Data</a>
<ul>
<li class="chapter" data-level="8.1" data-path="summarizing-1975-data.html"><a href="summarizing-1975-data.html#group-by-operations"><i class="fa fa-check"></i><b>8.1</b> Group-by Operations</a></li>
<li class="chapter" data-level="8.2" data-path="summarizing-1975-data.html"><a href="summarizing-1975-data.html#arrange-operations"><i class="fa fa-check"></i><b>8.2</b> Arrange operations</a></li>
<li class="chapter" data-level="8.3" data-path="summarizing-1975-data.html"><a href="summarizing-1975-data.html#further-inspection-of-1975-storm-amy"><i class="fa fa-check"></i><b>8.3</b> Further inspection of 1975 storm Amy</a>
<ul>
<li class="chapter" data-level="8.3.1" data-path="summarizing-1975-data.html"><a href="summarizing-1975-data.html#your-turn"><i class="fa fa-check"></i><b>8.3.1</b> Your Turn</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="piper.html"><a href="piper.html"><i class="fa fa-check"></i><b>9</b> The Pipe Operator</a>
<ul>
<li class="chapter" data-level="9.1" data-path="piper.html"><a href="piper.html#piping"><i class="fa fa-check"></i><b>9.1</b> Piping</a>
<ul>
<li class="chapter" data-level="9.1.1" data-path="piper.html"><a href="piper.html#the-magrittr-operator"><i class="fa fa-check"></i><b>9.1.1</b> The <code>magrittr</code> operator</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="10" data-path="basic-maps.html"><a href="basic-maps.html"><i class="fa fa-check"></i><b>10</b> Basic Maps</a>
<ul>
<li class="chapter" data-level="10.1" data-path="basic-maps.html"><a href="basic-maps.html#graphing-maps"><i class="fa fa-check"></i><b>10.1</b> Graphing Maps</a>
<ul>
<li class="chapter" data-level="10.1.1" data-path="basic-maps.html"><a href="basic-maps.html#plotting-location-of-storm-records"><i class="fa fa-check"></i><b>10.1.1</b> Plotting location of storm records</a></li>
<li class="chapter" data-level="10.1.2" data-path="basic-maps.html"><a href="basic-maps.html#basic-map"><i class="fa fa-check"></i><b>10.1.2</b> Basic map</a></li>
<li class="chapter" data-level="10.1.3" data-path="basic-maps.html"><a href="basic-maps.html#mapping-1975-storms"><i class="fa fa-check"></i><b>10.1.3</b> Mapping 1975 Storms</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="11" data-path="less-basic-maps.html"><a href="less-basic-maps.html"><i class="fa fa-check"></i><b>11</b> Less Basic Maps</a>
<ul>
<li class="chapter" data-level="11.1" data-path="less-basic-maps.html"><a href="less-basic-maps.html#more-mapping-approaches"><i class="fa fa-check"></i><b>11.1</b> More mapping approaches</a>
<ul>
<li class="chapter" data-level="11.1.1" data-path="less-basic-maps.html"><a href="less-basic-maps.html#storms-from-1975-to-1980"><i class="fa fa-check"></i><b>11.1.1</b> Storms from 1975 to 1980</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="12" data-path="summary.html"><a href="summary.html"><i class="fa fa-check"></i><b>12</b> Summary</a>
<ul>
<li class="chapter" data-level="12.1" data-path="summary.html"><a href="summary.html#number-of-storms-per-year"><i class="fa fa-check"></i><b>12.1</b> Number of Storms per Year</a></li>
<li class="chapter" data-level="12.2" data-path="summary.html"><a href="summary.html#your-turn-1"><i class="fa fa-check"></i><b>12.2</b> Your Turn</a></li>
</ul></li>
<li class="part"><span><b>IV Analyzing Storms 1975-2020</b></span></li>
<li class="chapter" data-level="13" data-path="counting-tropical-systems.html"><a href="counting-tropical-systems.html"><i class="fa fa-check"></i><b>13</b> Counting Tropical Systems</a></li>
<li class="chapter" data-level="14" data-path="visualizing-number-of-systems.html"><a href="visualizing-number-of-systems.html"><i class="fa fa-check"></i><b>14</b> Visualizing Number of Systems</a>
<ul>
<li class="chapter" data-level="14.1" data-path="visualizing-number-of-systems.html"><a href="visualizing-number-of-systems.html#barcharts"><i class="fa fa-check"></i><b>14.1</b> Barcharts</a>
<ul>
<li class="chapter" data-level="14.1.1" data-path="visualizing-number-of-systems.html"><a href="visualizing-number-of-systems.html#barchart-with-geom_bar"><i class="fa fa-check"></i><b>14.1.1</b> Barchart with <code>geom_bar()</code></a></li>
<li class="chapter" data-level="14.1.2" data-path="visualizing-number-of-systems.html"><a href="visualizing-number-of-systems.html#barchart-with-geom_col"><i class="fa fa-check"></i><b>14.1.2</b> Barchart with <code>geom_col()</code></a></li>
</ul></li>
<li class="chapter" data-level="14.2" data-path="visualizing-number-of-systems.html"><a href="visualizing-number-of-systems.html#customizing-a-barchart"><i class="fa fa-check"></i><b>14.2</b> Customizing a Barchart</a>
<ul>
<li class="chapter" data-level="14.2.1" data-path="visualizing-number-of-systems.html"><a href="visualizing-number-of-systems.html#global-versus-local-aesthetic-mappings"><i class="fa fa-check"></i><b>14.2.1</b> Global versus Local Aesthetic Mappings</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="15" data-path="counting-more-systems.html"><a href="counting-more-systems.html"><i class="fa fa-check"></i><b>15</b> Counting More Systems</a>
<ul>
<li class="chapter" data-level="15.1" data-path="counting-more-systems.html"><a href="counting-more-systems.html#counting-kinds-of-storms"><i class="fa fa-check"></i><b>15.1</b> Counting Kinds of Storms</a>
<ul>
<li class="chapter" data-level="15.1.1" data-path="counting-more-systems.html"><a href="counting-more-systems.html#counting-tropical-depressions"><i class="fa fa-check"></i><b>15.1.1</b> Counting Tropical Depressions</a></li>
<li class="chapter" data-level="15.1.2" data-path="counting-more-systems.html"><a href="counting-more-systems.html#counts-based-on-maximum-wind-speed"><i class="fa fa-check"></i><b>15.1.2</b> Counts Based on Maximum Wind Speed</a></li>
<li class="chapter" data-level="15.1.3" data-path="counting-more-systems.html"><a href="counting-more-systems.html#counting-tropical-storms"><i class="fa fa-check"></i><b>15.1.3</b> Counting Tropical Storms</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="16" data-path="counting-all-types-of-systems.html"><a href="counting-all-types-of-systems.html"><i class="fa fa-check"></i><b>16</b> Counting All Types of Systems</a>
<ul>
<li class="chapter" data-level="16.1" data-path="counting-all-types-of-systems.html"><a href="counting-all-types-of-systems.html#handling-various-conditions"><i class="fa fa-check"></i><b>16.1</b> Handling Various Conditions</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://www.gastonsanchez.com" target="blank">gastonsanchez.com</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Tidy Hurricanes</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="dplyr-and-ggplot2" class="section level1 hasAnchor" number="4">
<h1><span class="header-section-number">4</span> <code>"dplyr"</code> and <code>"ggplot2"</code><a href="dplyr-and-ggplot2.html#dplyr-and-ggplot2" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>As previously said, our main focus will be around what I consider to be the
two major tools from <em>tidyverse</em>: the packages <code>"dplyr"</code> and <code>"ggplot2"</code>.
In turn, the main subject of this text has to do with analyzing tropical
cyclones.</p>
<p>Before we get our hands dirty analyzing the <code>storms</code> data set, as well as
other external data sets, I want to give you a crash introduction to some of
the fundamental ideas behind tidyverse. Likewise, I want to quickly review
a handful of functions. The idea is to have a stepping stone that we can use
to further explore the fascinating data of storms.</p>
<div id="sample-data" class="section level2 hasAnchor" number="4.1">
<h2><span class="header-section-number">4.1</span> Sample Data<a href="dplyr-and-ggplot2.html#sample-data" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>For illustration purposes, I would like to begin with a small data set. To be
more specific, let’s consider data for a set of tropical cyclones that formed
during the month of September 2010 in the North Atlantic. If you ask me why I’m
choosing this particular set of storms, here are three random fun facts:
1) September tends to be the most active month
for the formation of tropical cyclones in the North Atlantic; 2) 2010 was the
year I moved to the USA, and 3) Sep-2010 turned out to have a storm named
<em>Gaston</em> 😉.</p>
<pre><code># A tibble: 8 × 4
  name     wind pressure category
  &lt;chr&gt;   &lt;dbl&gt;    &lt;dbl&gt; &lt;chr&gt;   
1 Gaston     35     1005 ts      
2 Hermine    60      989 ts      
3 Igor      135      924 cat4    
4 Julia     120      948 cat4    
5 Karl      110      956 cat3    
6 Lisa       75      982 cat1    
7 Matthew    50      998 ts      
8 Nicole     40      994 ts      </code></pre>
<p>As you can tell, the data is in tabular format organized into four columns and
eight rows. Each row corresponds to a single storm, in turn, the columns are:</p>
<ul>
<li><p><code>name</code> is the name given to the storm,</p></li>
<li><p><code>wind</code> corresponds to the maximum wind speed (in knots) reached by the storm,</p></li>
<li><p><code>pressure</code> has to do with the minimum pressure (in millibars) reached by
the storm,</p></li>
<li><p><code>category</code> indicates the category:</p>
<ul>
<li><code>ts</code> stands for <em>tropical storm</em></li>
<li><code>cat1</code> is a category-1 hurricane</li>
<li><code>cat3</code> is a category-3 hurricane</li>
<li><code>cat4</code> is a category-4 hurricane</li>
</ul></li>
</ul>
<p>The way this data is handled in R is with a <code>tibble</code> object. This class of
object provides the rectangular structure to store tables in tidyverse, and it
is central to this ecosystem.</p>
<p>Recall that tibbles are <em>printed</em> in a very peculiar form:</p>
<ul>
<li><p>the number of rows that are displayed is limited to 10;</p></li>
<li><p>depending on the width of the printing space, you will only see a few columns
shown to fit such width,</p></li>
<li><p>underneath the name of each column there is a three letter abbreviation
inside angle brackets,</p></li>
<li><p>this abbreviation indicates the <em>data type</em> used by R to store the values:</p>
<ul>
<li><code>&lt;chr&gt;</code> stands for <em>character</em> data</li>
<li><code>&lt;dbl&gt;</code> means <em>double</em> (i.e. real numbers or numbers with decimal digits)</li>
</ul></li>
</ul>
<p>Here’s the command I’ve used to create this tibble:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="dplyr-and-ggplot2.html#cb2-1" aria-hidden="true" tabindex="-1"></a>sep2010 <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb2-2"><a href="dplyr-and-ggplot2.html#cb2-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">name =</span> <span class="fu">c</span>(<span class="st">&#39;Gaston&#39;</span>, <span class="st">&#39;Hermine&#39;</span>, <span class="st">&#39;Igor&#39;</span>, <span class="st">&#39;Julia&#39;</span>, <span class="st">&#39;Karl&#39;</span>, <span class="st">&#39;Lisa&#39;</span>, <span class="st">&#39;Matthew&#39;</span>, <span class="st">&#39;Nicole&#39;</span>),</span>
<span id="cb2-3"><a href="dplyr-and-ggplot2.html#cb2-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">wind =</span> <span class="fu">c</span>(<span class="dv">35</span>, <span class="dv">60</span>, <span class="dv">135</span>, <span class="dv">120</span>, <span class="dv">110</span>, <span class="dv">75</span>, <span class="dv">50</span>, <span class="dv">40</span>),</span>
<span id="cb2-4"><a href="dplyr-and-ggplot2.html#cb2-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">pressure =</span> <span class="fu">c</span>(<span class="dv">1005</span>, <span class="dv">989</span>, <span class="dv">924</span>, <span class="dv">948</span>, <span class="dv">956</span>, <span class="dv">982</span>, <span class="dv">998</span>, <span class="dv">994</span>),</span>
<span id="cb2-5"><a href="dplyr-and-ggplot2.html#cb2-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">category =</span> <span class="fu">c</span>(<span class="st">&#39;ts&#39;</span>, <span class="st">&#39;ts&#39;</span>, <span class="st">&#39;cat4&#39;</span>, <span class="st">&#39;cat4&#39;</span>, <span class="st">&#39;cat3&#39;</span>, <span class="st">&#39;cat1&#39;</span>, <span class="st">&#39;ts&#39;</span>, <span class="st">&#39;ts&#39;</span>)</span>
<span id="cb2-6"><a href="dplyr-and-ggplot2.html#cb2-6" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p>To create a <em>tibble</em> you use the <code>tibble()</code> function. One option to organize
the content is by passing individual vectors (one vector per column) separated
by commas.</p>
</div>
<div id="basics-of-ggplot2" class="section level2 hasAnchor" number="4.2">
<h2><span class="header-section-number">4.2</span> Basics of <code>"ggplot2"</code><a href="dplyr-and-ggplot2.html#basics-of-ggplot2" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>With the <code>sep2010</code> data, we may be interested in obtaining a graphic like the
following scatter plot:</p>
<p><img src="R-tidy-hurricanes_files/figure-html/scatter1_sep2010-1.png" width="70%" style="display: block; margin: auto;" /></p>
<div id="some-terminology" class="section level3 hasAnchor" number="4.2.1">
<h3><span class="header-section-number">4.2.1</span> Some Terminology<a href="dplyr-and-ggplot2.html#some-terminology" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Before I show you how to produce the above scatter plot, it’s important to
introduce some of the key terminology used in <code>"ggplot2"</code>:</p>
<ul>
<li><p>The starting point is the <strong>data</strong> that we want to visualize. The convention
is to have data in a table object (e.g. <code>data.frame</code>, <code>tibble</code>) in which
<em>variables</em> are stored as columns.</p></li>
<li><p>Then we have so-called <strong>geoms</strong>, short for <em>geometric objects</em>; these are
basically things such as bars, lines, points, polygons, and other kind of
marks that are drawn to represent the data.</p></li>
<li><p>Geoms have visual properties, formally known as <em>aesthetic attributes</em>, and colloquially referred to as <strong>aesthetics</strong>; these are things such as <span class="math inline">\(x\)</span> and
<span class="math inline">\(y\)</span> positions, line color, fill color, point shapes, etc.</p></li>
<li><p>The use of a variable to encode a visual property of a geom is called a <strong>mapping</strong>.</p></li>
<li><p><strong>Scales</strong> control the mapping from the values in the data space to values
in the aesthetic space. A continuous <span class="math inline">\(y\)</span> scale maps larger numerical values to
vertically higher positions in space.</p></li>
<li><p><strong>Guides</strong> show the viewer how to map the visual properties back to the data
space. The most commonly used guides are the tick marks and labels on an axis.</p></li>
</ul>
<p>In a data graphic, there is a mapping (or correspondence) from properties
of the data to visual properties in the graphic. The data properties are
typically numerical or categorical values, while the visual properties include
the <span class="math inline">\(x\)</span> and <span class="math inline">\(y\)</span> positions of points, colors of lines, height of bars, and so on.</p>
<p>On the surface, representing a number with an <span class="math inline">\(x\)</span> coordinate may seem very
different from representing a number with a color of a point, but at an abstract
level, they are the same.</p>
<p>In the <em>grammar of graphics</em>, this deep similarity is not just recognized, but
made central.</p>
</div>
</div>
<div id="basic-scatterplot" class="section level2 hasAnchor" number="4.3">
<h2><span class="header-section-number">4.3</span> Basic Scatterplot<a href="dplyr-and-ggplot2.html#basic-scatterplot" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>A basic <code>ggplot()</code> specification looks like this:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="dplyr-and-ggplot2.html#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> sep2010, <span class="fu">aes</span>(<span class="at">x =</span> wind, <span class="at">y =</span> pressure))</span></code></pre></div>
<p>This creates a <code>ggplot</code> object using the data frame <code>econ_chem</code>. It also
specifies default <em>aesthetic mappings</em> within <code>aes()</code>:</p>
<ul>
<li><p><code>x = wind</code> maps the column <code>wind</code> to the <span class="math inline">\(x\)</span> position</p></li>
<li><p><code>y = pressure</code> maps the column <code>pressure</code> to the <span class="math inline">\(y\)</span> position</p></li>
</ul>
<p><code>"ggplot2"</code> has a simple requirement for data structures: they must be stored
in data frames or tibbles, and each type of variable that is mapped to an
aesthetic must be stored in its own column.</p>
<p>After we’ve given <code>ggplot()</code> the data frame and the aesthetic mappings, there’s
one more critical component. We need to tell it what <em>geometric objects</em> to
put there. At this point, <code>"ggplot2"</code> doesn’t know if we want bars, lines, points,
or something else to be drawn on the graph.</p>
<p>We’ll add <code>geom_point()</code> to draw points, resulting in a scatter plot:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="dplyr-and-ggplot2.html#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> sep2010, <span class="fu">aes</span>(<span class="at">x =</span> wind, <span class="at">y =</span> pressure)) <span class="sc">+</span></span>
<span id="cb4-2"><a href="dplyr-and-ggplot2.html#cb4-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()</span></code></pre></div>
<p><img src="R-tidy-hurricanes_files/figure-html/scatter2_sep2010-1.png" width="70%" style="display: block; margin: auto;" /></p>
<div id="storing-a-ggplot-object" class="section level3 hasAnchor" number="4.3.1">
<h3><span class="header-section-number">4.3.1</span> Storing a <code>ggplot</code> object<a href="dplyr-and-ggplot2.html#storing-a-ggplot-object" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>If you are going to reuse some of these components, you can store them in
variables. We can save the <code>ggplot</code> object in an object called <code>gg</code>, and then
add <code>geom_point()</code> to it.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="dplyr-and-ggplot2.html#cb5-1" aria-hidden="true" tabindex="-1"></a>gg <span class="ot">=</span> <span class="fu">ggplot</span>(sep2010, <span class="fu">aes</span>(<span class="at">x =</span> wind, <span class="at">y =</span> pressure)) </span>
<span id="cb5-2"><a href="dplyr-and-ggplot2.html#cb5-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-3"><a href="dplyr-and-ggplot2.html#cb5-3" aria-hidden="true" tabindex="-1"></a>gg <span class="sc">+</span> <span class="fu">geom_point</span>()</span></code></pre></div>
</div>
<div id="more-mappings" class="section level3 hasAnchor" number="4.3.2">
<h3><span class="header-section-number">4.3.2</span> More Mappings<a href="dplyr-and-ggplot2.html#more-mappings" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>We can also <strong>map</strong> the variable <code>category</code> to the color of the points, by
putting <code>aes()</code> inside the call to <code>geom_point()</code>, and specifying
<code>color = category</code></p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="dplyr-and-ggplot2.html#cb6-1" aria-hidden="true" tabindex="-1"></a>gg <span class="sc">+</span> <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">color =</span> category))</span></code></pre></div>
<p><img src="R-tidy-hurricanes_files/figure-html/scatter3_sep2010-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p>This doesn’t alter the default aesthetic mappings that we defined previously,
inside of <code>ggplot(...)</code>. What it does is add an aesthetic mapping for this
particular geom, <code>geom_point()</code>. If we added other geoms, this mapping would
not apply to them.</p>
</div>
<div id="setting-values" class="section level3 hasAnchor" number="4.3.3">
<h3><span class="header-section-number">4.3.3</span> Setting Values<a href="dplyr-and-ggplot2.html#setting-values" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Contrast this aesthetic <em>mapping</em> with aesthetic <strong>setting</strong>. This time, we
won’t use <code>aes()</code>; we’ll just set the value of <code>color</code> directly to <code>"red"</code>.
And we’ll also increase the size of the dots by setting <code>size</code>:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="dplyr-and-ggplot2.html#cb7-1" aria-hidden="true" tabindex="-1"></a>gg <span class="sc">+</span> <span class="fu">geom_point</span>(<span class="at">color =</span> <span class="st">&quot;red&quot;</span>, <span class="at">size =</span> <span class="dv">3</span>)</span></code></pre></div>
<p><img src="R-tidy-hurricanes_files/figure-html/scatter4_sep2010-1.png" width="70%" style="display: block; margin: auto;" /></p>
</div>
<div id="customizing-scales" class="section level3 hasAnchor" number="4.3.4">
<h3><span class="header-section-number">4.3.4</span> Customizing Scales<a href="dplyr-and-ggplot2.html#customizing-scales" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>We can also modify the <code>scales</code>; that is, the mappings from data to visual
attributes. Here, we’ll change the <span class="math inline">\(x\)</span> scale so that it has a larger range:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="dplyr-and-ggplot2.html#cb8-1" aria-hidden="true" tabindex="-1"></a>gg <span class="sc">+</span> <span class="fu">geom_point</span>() <span class="sc">+</span> <span class="fu">scale_x_continuous</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">150</span>))</span></code></pre></div>
<p><img src="R-tidy-hurricanes_files/figure-html/scatter5_sep2010-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p><br></p>
<p>If we go back to the example with the <code>color = category</code> mapping, we can also
modify the color scale and customize them with our own values:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="dplyr-and-ggplot2.html#cb9-1" aria-hidden="true" tabindex="-1"></a>gg <span class="sc">+</span> </span>
<span id="cb9-2"><a href="dplyr-and-ggplot2.html#cb9-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">color =</span> category), <span class="at">size =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb9-3"><a href="dplyr-and-ggplot2.html#cb9-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;blue&quot;</span>, <span class="st">&quot;magenta&quot;</span>, <span class="st">&quot;red&quot;</span>, <span class="st">&quot;cyan&quot;</span>))</span></code></pre></div>
<p><img src="R-tidy-hurricanes_files/figure-html/scatter6_sep2010-1.png" width="70%" style="display: block; margin: auto;" /></p>
</div>
<div id="themes-annotations-etc" class="section level3 hasAnchor" number="4.3.5">
<h3><span class="header-section-number">4.3.5</span> Themes, Annotations, etc<a href="dplyr-and-ggplot2.html#themes-annotations-etc" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Some aspects of a graph’s appearance fall outside the scope of the grammar of
graphics. These include the color of the background and grid lines in the
graphing area, the fonts used in the axis labels, annotations, text in the
graph title &amp; subtitle, legend details, and things like that. These are
controlled with auxiliary functions such as <code>labs()</code>, <code>theme()</code>, or <code>annotate()</code>.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="dplyr-and-ggplot2.html#cb10-1" aria-hidden="true" tabindex="-1"></a>gg <span class="sc">+</span> </span>
<span id="cb10-2"><a href="dplyr-and-ggplot2.html#cb10-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">color =</span> category), <span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb10-3"><a href="dplyr-and-ggplot2.html#cb10-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> name), <span class="at">hjust =</span> <span class="dv">0</span>, <span class="at">nudge_x =</span> <span class="dv">2</span>, <span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb10-4"><a href="dplyr-and-ggplot2.html#cb10-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">150</span>)) <span class="sc">+</span></span>
<span id="cb10-5"><a href="dplyr-and-ggplot2.html#cb10-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">900</span>, <span class="dv">1010</span>)) <span class="sc">+</span></span>
<span id="cb10-6"><a href="dplyr-and-ggplot2.html#cb10-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Storms in North Atlantic formed during Sep-2010&quot;</span>,</span>
<span id="cb10-7"><a href="dplyr-and-ggplot2.html#cb10-7" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&quot;Negative association between wind and pressure&quot;</span>,</span>
<span id="cb10-8"><a href="dplyr-and-ggplot2.html#cb10-8" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">&quot;Maximum Wind Speed (kn)&quot;</span>,</span>
<span id="cb10-9"><a href="dplyr-and-ggplot2.html#cb10-9" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">&quot;Minimum Pressure (mbar)&quot;</span>) <span class="sc">+</span></span>
<span id="cb10-10"><a href="dplyr-and-ggplot2.html#cb10-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="at">geom =</span> <span class="st">&quot;text&quot;</span>, <span class="at">x =</span> <span class="dv">26</span>, <span class="at">y =</span> <span class="dv">1005</span>, <span class="at">label =</span> <span class="st">&quot;hey!&quot;</span>, <span class="at">color =</span> <span class="st">&quot;purple&quot;</span>) <span class="sc">+</span></span>
<span id="cb10-11"><a href="dplyr-and-ggplot2.html#cb10-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb10-12"><a href="dplyr-and-ggplot2.html#cb10-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;bottom&quot;</span>)</span></code></pre></div>
<p><img src="R-tidy-hurricanes_files/figure-html/scatter7_sep2010-1.png" width="80%" style="display: block; margin: auto;" /></p>
<hr />
</div>
</div>
<div id="basic-dplyr-verbs" class="section level2 hasAnchor" number="4.4">
<h2><span class="header-section-number">4.4</span> Basic <code>"dplyr"</code> verbs<a href="dplyr-and-ggplot2.html#basic-dplyr-verbs" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>In no particular order of importance, let’s start with the set of elementary
<code>"dplyr"</code> functions known as the <em>basic dplyr verbs</em>:</p>
<ul>
<li><p><code>filter()</code>: select (i.e. keeping) rows that match a condition</p></li>
<li><p><code>slice()</code>: subset rows using their positions</p></li>
<li><p><code>select()</code>: keep or drop columns using their names and types</p></li>
<li><p><code>mutate()</code>: modify existing variables, or add new variables</p></li>
<li><p><code>arrange()</code>: reorder rows using column names</p></li>
<li><p><code>summarise()</code>: reduce variables to values</p></li>
<li><p><code>group_by()</code>: grouped (aggregated) operations</p></li>
</ul>
<div id="filter" class="section level3 hasAnchor" number="4.4.1">
<h3><span class="header-section-number">4.4.1</span> Filter<a href="dplyr-and-ggplot2.html#filter" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><code>filter()</code> allows you to select rows by defining a condition (which could be
simple or compound). For example, we can filter <code>storms</code> by selecting those
rows from <code>year</code> 1975</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="dplyr-and-ggplot2.html#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># using a single condition</span></span>
<span id="cb11-2"><a href="dplyr-and-ggplot2.html#cb11-2" aria-hidden="true" tabindex="-1"></a>storms75 <span class="ot">&lt;-</span> <span class="fu">filter</span>(storms, year <span class="sc">==</span> <span class="dv">1975</span>)</span></code></pre></div>
<p>We can also use a compound logical condition:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="dplyr-and-ggplot2.html#cb12-1" aria-hidden="true" tabindex="-1"></a>amy75 <span class="ot">&lt;-</span> <span class="fu">filter</span>(storms, year <span class="sc">==</span> <span class="dv">1975</span> <span class="sc">&amp;</span> name <span class="sc">==</span> <span class="st">&quot;Amy&quot;</span>)</span>
<span id="cb12-2"><a href="dplyr-and-ggplot2.html#cb12-2" aria-hidden="true" tabindex="-1"></a>amy75</span></code></pre></div>
<pre><code>## # A tibble: 31 × 13
##    name   year month   day  hour   lat  long status      category  wind pressure
##    &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;fct&gt;          &lt;dbl&gt; &lt;int&gt;    &lt;int&gt;
##  1 Amy    1975     6    27     0  27.5 -79   tropical d…       NA    25     1013
##  2 Amy    1975     6    27     6  28.5 -79   tropical d…       NA    25     1013
##  3 Amy    1975     6    27    12  29.5 -79   tropical d…       NA    25     1013
##  4 Amy    1975     6    27    18  30.5 -79   tropical d…       NA    25     1013
##  5 Amy    1975     6    28     0  31.5 -78.8 tropical d…       NA    25     1012
##  6 Amy    1975     6    28     6  32.4 -78.7 tropical d…       NA    25     1012
##  7 Amy    1975     6    28    12  33.3 -78   tropical d…       NA    25     1011
##  8 Amy    1975     6    28    18  34   -77   tropical d…       NA    30     1006
##  9 Amy    1975     6    29     0  34.4 -75.8 tropical s…       NA    35     1004
## 10 Amy    1975     6    29     6  34   -74.8 tropical s…       NA    40     1002
## # ℹ 21 more rows
## # ℹ 2 more variables: tropicalstorm_force_diameter &lt;int&gt;,
## #   hurricane_force_diameter &lt;int&gt;</code></pre>
</div>
<div id="slice" class="section level3 hasAnchor" number="4.4.2">
<h3><span class="header-section-number">4.4.2</span> Slice<a href="dplyr-and-ggplot2.html#slice" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><code>slice()</code> allows you to subset rows using their positions, for example:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="dplyr-and-ggplot2.html#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># first row</span></span>
<span id="cb14-2"><a href="dplyr-and-ggplot2.html#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="fu">slice</span>(amy75, <span class="dv">1</span>)</span>
<span id="cb14-3"><a href="dplyr-and-ggplot2.html#cb14-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-4"><a href="dplyr-and-ggplot2.html#cb14-4" aria-hidden="true" tabindex="-1"></a><span class="co"># third row</span></span>
<span id="cb14-5"><a href="dplyr-and-ggplot2.html#cb14-5" aria-hidden="true" tabindex="-1"></a><span class="fu">slice</span>(amy75, <span class="dv">3</span>)</span>
<span id="cb14-6"><a href="dplyr-and-ggplot2.html#cb14-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-7"><a href="dplyr-and-ggplot2.html#cb14-7" aria-hidden="true" tabindex="-1"></a><span class="co"># first three rows</span></span>
<span id="cb14-8"><a href="dplyr-and-ggplot2.html#cb14-8" aria-hidden="true" tabindex="-1"></a>three_rows <span class="ot">=</span> <span class="fu">slice</span>(amy75, <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>)</span>
<span id="cb14-9"><a href="dplyr-and-ggplot2.html#cb14-9" aria-hidden="true" tabindex="-1"></a>three_rows</span>
<span id="cb14-10"><a href="dplyr-and-ggplot2.html#cb14-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-11"><a href="dplyr-and-ggplot2.html#cb14-11" aria-hidden="true" tabindex="-1"></a><span class="co"># specify a negative position</span></span>
<span id="cb14-12"><a href="dplyr-and-ggplot2.html#cb14-12" aria-hidden="true" tabindex="-1"></a><span class="fu">slice</span>(amy75, <span class="sc">-</span><span class="dv">1</span>)</span></code></pre></div>
<p>We should note that <code>slice()</code> comes with a set of sibling functions such as:</p>
<ul>
<li><p><code>slice_head()</code> to subset the first rows</p></li>
<li><p><code>slice_tail()</code> to subset the last rows</p></li>
<li><p><code>slice_min()</code> to subset rows with lowest values of a variable</p></li>
<li><p><code>slice_max()</code> to subset rows with highest values of a variable</p></li>
<li><p><code>slice_sample()</code> to randomly subset rows</p></li>
</ul>
</div>
<div id="select" class="section level3 hasAnchor" number="4.4.3">
<h3><span class="header-section-number">4.4.3</span> Select<a href="dplyr-and-ggplot2.html#select" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><code>select()</code> allows you to select one or more columns by name:</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="dplyr-and-ggplot2.html#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">select</span>(amy75, day, month, wind, pressure)</span></code></pre></div>
<pre><code>## # A tibble: 31 × 4
##      day month  wind pressure
##    &lt;int&gt; &lt;dbl&gt; &lt;int&gt;    &lt;int&gt;
##  1    27     6    25     1013
##  2    27     6    25     1013
##  3    27     6    25     1013
##  4    27     6    25     1013
##  5    28     6    25     1012
##  6    28     6    25     1012
##  7    28     6    25     1011
##  8    28     6    30     1006
##  9    29     6    35     1004
## 10    29     6    40     1002
## # ℹ 21 more rows</code></pre>
<p><code>select()</code> also allows you to specify a range of consecutive columns via the <code>:</code> operator</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="dplyr-and-ggplot2.html#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># consecutive columns</span></span>
<span id="cb17-2"><a href="dplyr-and-ggplot2.html#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="fu">select</span>(amy75, name<span class="sc">:</span>long)</span></code></pre></div>
<pre><code>## # A tibble: 31 × 7
##    name   year month   day  hour   lat  long
##    &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
##  1 Amy    1975     6    27     0  27.5 -79  
##  2 Amy    1975     6    27     6  28.5 -79  
##  3 Amy    1975     6    27    12  29.5 -79  
##  4 Amy    1975     6    27    18  30.5 -79  
##  5 Amy    1975     6    28     0  31.5 -78.8
##  6 Amy    1975     6    28     6  32.4 -78.7
##  7 Amy    1975     6    28    12  33.3 -78  
##  8 Amy    1975     6    28    18  34   -77  
##  9 Amy    1975     6    29     0  34.4 -75.8
## 10 Amy    1975     6    29     6  34   -74.8
## # ℹ 21 more rows</code></pre>
<p><code>select()</code> also allows you to exclude one or more columns by negating their
names:</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="dplyr-and-ggplot2.html#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co"># exclude columns by name</span></span>
<span id="cb19-2"><a href="dplyr-and-ggplot2.html#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="fu">select</span>(amy75, <span class="sc">-</span>(lat<span class="sc">:</span>hurricane_force_diameter))</span></code></pre></div>
<pre><code>## # A tibble: 31 × 5
##    name   year month   day  hour
##    &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt; &lt;dbl&gt;
##  1 Amy    1975     6    27     0
##  2 Amy    1975     6    27     6
##  3 Amy    1975     6    27    12
##  4 Amy    1975     6    27    18
##  5 Amy    1975     6    28     0
##  6 Amy    1975     6    28     6
##  7 Amy    1975     6    28    12
##  8 Amy    1975     6    28    18
##  9 Amy    1975     6    29     0
## 10 Amy    1975     6    29     6
## # ℹ 21 more rows</code></pre>
<p>Interestingly, you can also <code>select()</code> columns by their position</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="dplyr-and-ggplot2.html#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co"># columns by position</span></span>
<span id="cb21-2"><a href="dplyr-and-ggplot2.html#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="fu">select</span>(amy75, <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>)</span></code></pre></div>
<pre><code>## # A tibble: 31 × 5
##    name   year month   day  hour
##    &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt; &lt;dbl&gt;
##  1 Amy    1975     6    27     0
##  2 Amy    1975     6    27     6
##  3 Amy    1975     6    27    12
##  4 Amy    1975     6    27    18
##  5 Amy    1975     6    28     0
##  6 Amy    1975     6    28     6
##  7 Amy    1975     6    28    12
##  8 Amy    1975     6    28    18
##  9 Amy    1975     6    29     0
## 10 Amy    1975     6    29     6
## # ℹ 21 more rows</code></pre>
</div>
<div id="mutate" class="section level3 hasAnchor" number="4.4.4">
<h3><span class="header-section-number">4.4.4</span> Mutate<a href="dplyr-and-ggplot2.html#mutate" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Another basic verb is <code>mutate()</code> which allows you to: 1) transform existing
variables, but also 2) add new variables.</p>
<p>For illustration purposes, let’s create a subset of storm Amy by selecting
<code>day</code>, <code>month</code>, <code>hour</code>, and <code>wind</code>:</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="dplyr-and-ggplot2.html#cb23-1" aria-hidden="true" tabindex="-1"></a>amy75_dat <span class="ot">=</span> <span class="fu">select</span>(amy75, day, month, hour, wind)</span>
<span id="cb23-2"><a href="dplyr-and-ggplot2.html#cb23-2" aria-hidden="true" tabindex="-1"></a>amy75_dat</span></code></pre></div>
<pre><code>## # A tibble: 31 × 4
##      day month  hour  wind
##    &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt;
##  1    27     6     0    25
##  2    27     6     6    25
##  3    27     6    12    25
##  4    27     6    18    25
##  5    28     6     0    25
##  6    28     6     6    25
##  7    28     6    12    25
##  8    28     6    18    30
##  9    29     6     0    35
## 10    29     6     6    40
## # ℹ 21 more rows</code></pre>
<p>Wind speed values—column <code>wind</code>—are expressed in knots. But what if we are
interested in having wind speed expressed in miles per hour? Enter <code>mutate()</code>.
Here is how to add a new column <code>wind_mph</code> (1 knot = 1.15078 mph)</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="dplyr-and-ggplot2.html#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mutate</span>(amy75_dat, <span class="at">wind_mph =</span> wind <span class="sc">*</span> <span class="fl">1.15078</span>)</span></code></pre></div>
<pre><code>## # A tibble: 31 × 5
##      day month  hour  wind wind_mph
##    &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt;    &lt;dbl&gt;
##  1    27     6     0    25     28.8
##  2    27     6     6    25     28.8
##  3    27     6    12    25     28.8
##  4    27     6    18    25     28.8
##  5    28     6     0    25     28.8
##  6    28     6     6    25     28.8
##  7    28     6    12    25     28.8
##  8    28     6    18    30     34.5
##  9    29     6     0    35     40.3
## 10    29     6     6    40     46.0
## # ℹ 21 more rows</code></pre>
<hr />
</div>
</div>
<div id="exercises" class="section level2 hasAnchor" number="4.5">
<h2><span class="header-section-number">4.5</span> Exercises<a href="dplyr-and-ggplot2.html#exercises" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ol style="list-style-type: lower-alpha">
<li>use <code>slice()</code> to subset the 10th row of <code>starwars</code>.</li>
</ol>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="dplyr-and-ggplot2.html#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="fu">slice</span>(starwars, <span class="dv">10</span>)</span></code></pre></div>
<ol start="2" style="list-style-type: lower-alpha">
<li>use <code>slice_head()</code> to subset the first 4 rows of <code>starwars</code></li>
</ol>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="dplyr-and-ggplot2.html#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="fu">slice_head</span>(starwars, <span class="at">n =</span> <span class="dv">4</span>)</span></code></pre></div>
<ol start="3" style="list-style-type: lower-alpha">
<li>use <code>slice_tail()</code> to subset the last 3 rows of <code>starwars</code></li>
</ol>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="dplyr-and-ggplot2.html#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="fu">slice_tail</span>(starwars, <span class="at">n =</span> <span class="dv">3</span>)</span></code></pre></div>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="storms.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="single-columns.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["R-tidy-hurricanes.pdf", "R-tidy-hurricanes.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
